<!DOCTYPE html>
<html>

  <head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <title>Emulate block scope</title>
  <meta name="description" content="Emulating Block Scope in JavaScriptWhile there are many issues that trip up developers coming from other languages, variable scoping may be number one. The f...">
  <meta name="author" content="Marcelo Carmona">
  <link href="https://fonts.googleapis.com/css?family=Roboto" rel="stylesheet">
  <link rel="stylesheet" href="/css/main.css">
  <link rel="canonical" href="http://localhost:4000/emulate-block-scope/question">
  <link rel="alternate" type="application/rss+xml" title="Front end Developer Interview Questions" href="http://localhost:4000/feed.xml">

  
  <meta property="og:locale" content="en_US">
  <meta property="og:type" content="article">
  <meta property="og:title" content="Emulate block scope">
  <meta property="og:description" content="Emulating Block Scope in JavaScriptWhile there are many issues that trip up developers coming from other languages, variable scoping may be number one. The f...">
  <meta property="og:url" content="http://localhost:4000/emulate-block-scope/question">
  <meta property="og:site_name" content="Front end Developer Interview Questions">
  <meta property="og:image" content="http://localhost:4000/img/marcelo.jpg">
  <meta property="og:publisher" content="https://www.facebook.com/marcelocarmona">

  <meta name="twitter:card" content="summary">
  <meta name="twitter:site" content="@carmonamarcelo">
  <meta name="twitter:title" content="Emulate block scope">
  <meta name="twitter:description" content="Emulating Block Scope in JavaScriptWhile there are many issues that trip up developers coming from other languages, variable scoping may be number one. The f...">
  <meta name="twitter:image" content="http://localhost:4000/img/og.jpg">
  
</head>


  <body>

    <header class="header">

  <div class="wrapper">

    <div class="header__profile">
      <a href="/">
        <img src="/img/marcelo.jpg" alt="Marcelo Carmona">
      </a>
    </div>

  </div>

</header>

<div class="bio">
  <p class="bio__name">Front end Developer Interview Questions</p>
  <a href="https://twitter.com/carmonamarcelo" class="twitter-follow-button" data-show-count="false">Follow @carmonamarcelo</a>
  <script async src="//platform.twitter.com/widgets.js" charset="utf-8"></script>
  <p class="bio__I-am">A list of helpful front-end related questions you can use to interview potential candidates, test yourself or completely ignore.
</p>
</div>


    <div class="page-content">
      <div class="page-content__list wrapper">
        <article class="post" itemscope itemtype="http://schema.org/BlogPosting">

  <header class="post-header">
    <h1 class="post__title" itemprop="name headline">Emulate block scope</h1>
  </header>

  <div class="post-content" itemprop="articleBody">
    <h3 id="emulating-block-scope-in-javascript">Emulating Block Scope in JavaScript</h3>
<p>While there are many issues that trip up developers coming from other languages, variable scoping may be number one. The fundamental problem is that many expect variables to be scoped to a particular block (like a for loop), but in JavaScript variables declared with var are scoped to the nearest parent function.</p>

<p>First let’s take a look at how this can go wrong.</p>

<div class="language-javascript highlighter-rouge"><pre class="highlight"><code><span class="kd">var</span> <span class="nx">avatar</span> <span class="o">=</span> <span class="s2">"Ang"</span><span class="p">;</span>
<span class="kd">var</span> <span class="nx">element</span> <span class="o">=</span> <span class="s2">"Air"</span><span class="p">;</span>

<span class="kd">var</span> <span class="nx">elements</span> <span class="o">=</span> <span class="p">[</span>
    <span class="s2">"Air"</span><span class="p">,</span>
    <span class="s2">"Earth"</span><span class="p">,</span>
    <span class="s2">"Fire"</span><span class="p">,</span>
    <span class="s2">"Water"</span>
<span class="p">];</span>

<span class="k">for</span> <span class="p">(</span><span class="kd">var</span> <span class="nx">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="nx">i</span> <span class="o">&lt;</span> <span class="nx">elements</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
    <span class="kd">var</span> <span class="nx">element</span> <span class="o">=</span> <span class="nx">elements</span><span class="p">[</span><span class="nx">i</span><span class="p">];</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">avatar</span> <span class="o">+</span> <span class="s2">" has mastered "</span> <span class="o">+</span> <span class="nx">element</span><span class="p">);</span>
<span class="p">}</span>

<span class="c1">// Outputs: "Ang's primary element is Water"</span>
<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">avatar</span> <span class="o">+</span> <span class="s2">"'s primary element is "</span> <span class="o">+</span> <span class="nx">element</span><span class="p">);</span>
</code></pre>
</div>

    <h1>Solution</h1>
    <p>primary element is Air” instead of the actual result.</p>

<p>This issue is easily avoided once you become aware of it. Avoiding variable declarations within blocks tends to prevent any confusion.</p>

<p>But suppose that we really wanted to use block scoping in JavaScript. How would we go about it? We could do something like this.</p>

<div class="language-javascript highlighter-rouge"><pre class="highlight"><code><span class="kd">var</span> <span class="nx">avatar</span> <span class="o">=</span> <span class="s2">"Ang"</span><span class="p">;</span>
<span class="kd">var</span> <span class="nx">element</span> <span class="o">=</span> <span class="s2">"Air"</span><span class="p">;</span>

<span class="kd">var</span> <span class="nx">elements</span> <span class="o">=</span> <span class="p">[</span>
    <span class="s2">"Air"</span><span class="p">,</span>
    <span class="s2">"Earth"</span><span class="p">,</span>
    <span class="s2">"Fire"</span><span class="p">,</span>
    <span class="s2">"Water"</span>
<span class="p">];</span>

<span class="k">for</span> <span class="p">(</span><span class="kd">var</span> <span class="nx">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="nx">i</span> <span class="o">&lt;</span> <span class="nx">elements</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
    <span class="p">(</span><span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
        <span class="kd">var</span> <span class="nx">element</span> <span class="o">=</span> <span class="nx">elements</span><span class="p">[</span><span class="nx">i</span><span class="p">];</span>
        <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">avatar</span> <span class="o">+</span> <span class="s2">" has mastered "</span> <span class="o">+</span> <span class="nx">element</span><span class="p">);</span>
    <span class="p">})();</span>
<span class="p">}</span>

<span class="c1">// Outputs: "Ang's primary element is Air"</span>
<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">avatar</span> <span class="o">+</span> <span class="s2">"'s primary element is "</span> <span class="o">+</span> <span class="nx">element</span><span class="p">);</span>
</code></pre>
</div>

<p>This solution uses an IIFE to emulate block scoping. Since functions are JavaScript’s scoping mechanism, we define and immediately invoke a new function on each pass through the loop, therefore approximating the behavior of a block scope.</p>

<p>While this isn’t idiomatic JavaScript, it does help give you an idea of just how flexible JavaScript can be.</p>

<p>It is also worth noting that drafts of the ECMAScript 6 specification (the next version of JavaScript) include a let keyword which is used to define block-scoped variables. If you are interested in playing around with this proposed keyword, it is available in FireFox.</p>

  </div>


</article>

      </div>
    </div>

    <footer class="footer">
  <div class="wrapper">
    <p>
      <a href="//twitter.com/carmonamarcelo" target="_blank">
        <img src="/img/icons/twitter.svg" alt="Marcelo Carmona on Twitter">
      </a>
      <a href="//github.com/marcelocarmona" target="_blank">
        <img src="/img/icons/github.svg" alt="Marcelo Carmona on GitHub">
      </a>
    </p>
  </div>
</footer>
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-83688441-1', 'auto');
  ga('send', 'pageview');

</script>


  </body>

</html>
